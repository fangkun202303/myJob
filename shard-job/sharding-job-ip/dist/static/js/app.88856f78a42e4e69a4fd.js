webpackJsonp([1],{NHnr:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("7+uW"),o={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},staticRenderFns:[]};var r=a("VU/8")({name:"App"},o,!1,function(e){a("gsu9")},null,null).exports,l=a("/ocq"),s=a("mw3O"),i=a.n(s),u=a("zL8q"),d=a.n(u),c={name:"MyIpShardSettinng",data:function(){return{tableData:[],showA:!0,showB:!1,options:[],value:"",form:{id:"",shard_name:"",app_name:"",orde:"",ip:"",port:"",extend:""},dateValue:""}},mounted:function(){this.getXxlJobGroups(),this.getShardList()},methods:{mySelect:function(e){var t=this;console.log(),this.$axios.get("shard/myShardList?"+i.a.stringify(this.value)).then(function(e){console.log(e),t.tableData=e.data.myShards})},chengShowValue:function(){this.showA=!1,this.showB=!0,this.form={id:"",shard_name:"",app_name:"",order:"",ip:"",port:"",extend:""},this.getXxlJobGroups()},updateRow:function(e){this.showA=!1,this.showB=!0,this.form=e},deleteRow:function(e){var t={id:e.id},a=this;this.$axios.delete("/shard/delete?"+i.a.stringify(t)).then(function(e){"1"==e.data.code?(u.Message.success(e.data.msg),""!=a.value?a.mySelect(a.value):a.getShardList()):u.Message.error(e.data.msg)})},onSubmit:function(){this.showA=!0,this.showB=!1;var e=this.form,t=this;""==e.id?""==e.shard_name?u.Message.warning("分片名称不能为空！"):""==e.app_name?u.Message.warning("执行器名称不能为空！"):""==e.ip?u.Message.warning("IP不能为空！"):""==e.port?u.Message.warning("端口号不能为空！"):""==e.extend?u.Message.warning("分片业务字段不能为空！"):this.$axios.post("/shard/save?"+i.a.stringify(e)).then(function(e){"1"==e.data.code?(u.Message.success(e.data.msg),""!=t.value?t.mySelect(t.value):t.getShardList()):u.Message.error(e.data.msg)}):""==e.shard_name?u.Message.warning("分片名称不能为空！"):""==e.app_name?u.Message.warning("执行器名称不能为空！"):""==e.ip?u.Message.warning("IP不能为空！"):""==e.port?u.Message.warning("端口号不能为空！"):""==e.extend?u.Message.warning("分片业务字段不能为空！"):this.$axios.put("/shard/update?"+i.a.stringify(e)).then(function(e){"1"==e.data.code?(u.Message.success(e.data.msg),""!=t.value?t.mySelect(t.value):t.getShardList()):u.Message.error(e.data.msg)})},cancel:function(){this.showA=!0,this.showB=!1,""!=that.value?that.mySelect(that.value):that.getShardList()},getShardList:function(){var e=this;this.$axios.get("/shard/getShardList").then(function(t){"1"==t.data.code?e.tableData=t.data.shardList:u.Message.error(t.data.msg)})},getXxlJobGroups:function(){var e=this;this.$axios.get("/shard/xxlJobGroupList").then(function(t){"1"==t.data.code&&(e.options=[],t.data.xxlJobGroups.forEach(function(t){var a={value:t.appName,label:t.title};e.options.push(a)}))})}}},p={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e.showA?a("div",[a("el-select",{attrs:{label:"执行器",placeholder:"请选择"},on:{change:function(t){return e.mySelect()}},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},e._l(e.options,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.chengShowValue()}}},[e._v("添加")]),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,border:""}},[a("el-table-column",{attrs:{prop:"shard_name",label:"分片名称",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"app_name",label:"执行器"}}),e._v(" "),a("el-table-column",{attrs:{prop:"ip",label:"分片IP",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"port",label:"分片port",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"extend",label:"分片的扩展业务字段",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"orde",label:"排序",width:"200"}}),e._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.updateRow(t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.deleteRow(t.row)}}},[e._v("删除")])]}}],null,!1,1853961211)})],1)],1):e._e(),e._v(" "),e.showB?a("div",{staticStyle:{width:"50%","margin-left":"20%"}},[a("el-form",{ref:"form",attrs:{model:e.form,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"执行器"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.app_name,callback:function(t){e.$set(e.form,"app_name",t)},expression:"form.app_name"}},e._l(e.options,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"分片名称"}},[a("el-input",{attrs:{placeholder:"请输入分片名称"},model:{value:e.form.shard_name,callback:function(t){e.$set(e.form,"shard_name",t)},expression:"form.shard_name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"分片IP"}},[a("el-input",{attrs:{placeholder:"请输入分片IP"},model:{value:e.form.ip,callback:function(t){e.$set(e.form,"ip",t)},expression:"form.ip"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"分片端口"}},[a("el-input",{attrs:{placeholder:"请输入分片端口"},model:{value:e.form.port,callback:function(t){e.$set(e.form,"port",t)},expression:"form.port"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"分片业务字段"}},[a("el-input",{attrs:{placeholder:"请输入分片业务字段数据"},model:{value:e.form.extend,callback:function(t){e.$set(e.form,"extend",t)},expression:"form.extend"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"分片排序"}},[a("el-input",{attrs:{placeholder:"请输入分片排序"},model:{value:e.form.orde,callback:function(t){e.$set(e.form,"orde",t)},expression:"form.orde"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("保存")]),e._v(" "),a("el-button",{on:{click:function(t){return e.cancel()}}},[e._v("取消")])],1)],1)],1):e._e()])},staticRenderFns:[]},h=a("VU/8")(c,p,!1,null,null,null).exports;n.default.use(l.a);var m=new l.a({routes:[{path:"/",redirect:h},{path:"/MyIpShardSettinng",name:"MyIpShardSettinng",component:h}]}),f=(a("tvR6"),a("mtWM")),v=a.n(f);n.default.config.productionTip=!1,n.default.use(d.a),n.default.prototype.$axios=v.a,new n.default({el:"#app",router:m,components:{App:r},template:"<App/>"})},gsu9:function(e,t){},tvR6:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.88856f78a42e4e69a4fd.js.map